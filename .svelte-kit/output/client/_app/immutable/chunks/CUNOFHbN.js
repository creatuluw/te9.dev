import{l as t,y as w,z as i,A as b,j as n,m as k,o as A,w as C,x as B,B as S}from"./BD00kAjd.js";function j(e,v,l=v){var f=new WeakSet;t(e,"input",async c=>{var d=c?e.defaultValue:e.value;if(d=u(e)?m(d):d,l(d),k!==null&&f.add(k),await w(),d!==(d=v())){var r=e.selectionStart,s=e.selectionEnd,o=e.value.length;if(e.value=d??"",s!==null){var a=e.value.length;r===s&&s===o&&a>o?(e.selectionStart=a,e.selectionEnd=a):(e.selectionStart=r,e.selectionEnd=Math.min(s,a))}}}),(n&&e.defaultValue!==e.value||i(v)==null&&e.value)&&(l(u(e)?m(e.value):e.value),k!==null&&f.add(k)),b(()=>{var c=v();if(e===document.activeElement){var d=A??k;if(f.has(d))return}u(e)&&c===m(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const _=new Set;function q(e,v,l,f,c=f){var d=l.getAttribute("type")==="checkbox",r=e;let s=!1;if(v!==null)for(var o of v)r=r[o]??(r[o]=[]);r.push(l),t(l,"change",()=>{var a=l.__value;d&&(a=y(r,a,l.checked)),c(a)},()=>c(d?[]:null)),b(()=>{var a=f();if(n&&l.defaultChecked!==l.checked){s=!0;return}d?(a=a||[],l.checked=a.includes(l.__value)):l.checked=C(l.__value,a)}),B(()=>{var a=r.indexOf(l);a!==-1&&r.splice(a,1)}),_.has(r)||(_.add(r),S(()=>{r.sort((a,h)=>a.compareDocumentPosition(h)===4?-1:1),_.delete(r)})),S(()=>{if(s){var a;if(d)a=y(r,a,l.checked);else{var h=r.find(E=>E.checked);a=h==null?void 0:h.__value}c(a)}})}function x(e,v,l=v){t(e,"change",f=>{var c=f?e.defaultChecked:e.checked;l(c)}),(n&&e.defaultChecked!==e.checked||i(v)==null)&&l(e.checked),b(()=>{var f=v();e.checked=!!f})}function y(e,v,l){for(var f=new Set,c=0;c<e.length;c+=1)e[c].checked&&f.add(e[c].__value);return l||f.delete(v),Array.from(f)}function u(e){var v=e.type;return v==="number"||v==="range"}function m(e){return e===""?null:+e}export{q as a,j as b,x as c};
